---
description: 
globs: 
alwaysApply: true
---
# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø
–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º `.env` —Ñ–∞–π–ª–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏–º –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## üìã –ü—Ä–∞–≤–∏–ª–∞

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
icambio/
‚îú‚îÄ‚îÄ .env                    # üîê –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ (–ù–ï –í GIT)
‚îú‚îÄ‚îÄ .env.example           # üìã –û–±—Ä–∞–∑–µ—Ü —Å placeholder'–∞–º–∏ (–í GIT)
‚îú‚îÄ‚îÄ .gitignore            # üö´ –ò—Å–∫–ª—é—á–∞–µ—Ç .env —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ config/settings.py # –ß–∏—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ .env
‚îî‚îÄ‚îÄ frontend/
    ‚îî‚îÄ‚îÄ vite.config.ts     # –ù–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π .env
```

### 2. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

#### Backend (Django):
```env
# Django –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SECRET_KEY=...
DEBUG=True
ALLOWED_HOSTS=...

# Supabase (backend)
SUPABASE_URL=...
SUPABASE_SERVICE_ROLE_KEY=...
SUPABASE_JWT_SECRET=...
```

#### Frontend (Vite):
```env
# Vite —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å VITE_
VITE_SUPABASE_URL=...
VITE_SUPABASE_ANON_KEY=...
```

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### ‚úÖ –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- –ö–æ–º–º–∏—Ç–∏—Ç—å `.env.example` —Å placeholder'–∞–º–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

#### ‚ùå –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å:
- –•–∞—Ä–¥–∫–æ–¥–∏—Ç—å —Ç–æ–∫–µ–Ω—ã/–∫–ª—é—á–∏ –≤ –∫–æ–¥–µ
- –ö–æ–º–º–∏—Ç–∏—Ç—å —Ñ–∞–π–ª—ã `.env` –≤ Git
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å production –∫–ª—é—á–∏ –≤ development

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –î–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone ...

# 2. –ö–æ–ø–∏—Ä—É–µ–º –æ–±—Ä–∞–∑–µ—Ü
cp .env.example .env

# 3. –ó–∞–ø–æ–ª–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
nano .env

# 4. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–µ–∫—Ç
# Backend:
cd backend && python manage.py runserver

# Frontend:
cd frontend && yarn dev
```

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

#### Development (.env):
```env
DEBUG=True
SUPABASE_URL=https://your-dev-project.supabase.co
```

#### Production:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ production –∫–ª—é—á–∏ –≤ —Ñ–∞–π–ª–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ CI/CD —Å–∏—Å—Ç–µ–º–∞—Ö

### 6. –í–∞–ª–∏–¥–∞—Ü–∏—è

#### Backend (Django):
```python
# settings.py –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
if not SUPABASE_URL:
    raise ValueError("SUPABASE_URL environment variable is required")
```

#### Frontend (Vite):
```typescript
// supabase.ts –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Missing Supabase environment variables')
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Django (backend/config/settings.py):
```python
from pathlib import Path
from dotenv import load_dotenv

BASE_DIR = Path(__file__).resolve().parent.parent
PROJECT_ROOT = BASE_DIR.parent

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
load_dotenv(PROJECT_ROOT / '.env')
```

### Vite (frontend/vite.config.ts):
```typescript
export default defineConfig(({ mode }) => {
  const env = loadEnv(mode, path.resolve(__dirname, '..'), '')
  
  return {
    envDir: path.resolve(__dirname, '..'), // –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
    // ...
  }
})
```

## üö® –ß—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏

### –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –ø–æ–ø–∞–ª –≤ Git:
1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ Supabase
2. –£–¥–∞–ª–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ Git
3. –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª
4. –ü—Ä–æ–∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É

### –ï—Å–ª–∏ .env –ø–æ–ø–∞–ª –≤ Git:
1. –£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª –∏–∑ Git: `git rm --cached .env`
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`
3. –°–º–µ–Ω–∏—Ç–µ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã
4. –û—á–∏—Å—Ç–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é Git

## üìö –°—Å—ã–ª–∫–∏
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è dotenv](mdc:https:/github.com/motdotla/dotenv)
- [Vite Environment Variables](mdc:https:/vitejs.dev/guide/env-and-mode.html)
- [Django Settings Best Practices](mdc:https:/django-environ.readthedocs.io) 